<mxfile host="app.diagrams.net" modified="2025-12-16T00:00:00.000Z" agent="BlueShark-Stark" etag="blueshark-database-erd" version="21.0.0" type="device">
  <diagram name="Database ERD" id="database-erd">
    <mxGraphModel dx="1434" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="BLUESHARK DATABASE - ENTITY RELATIONSHIP DIAGRAM" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=22;fontStyle=1;fontColor=#2272B4;" vertex="1" parent="1">
          <mxGeometry x="450" y="20" width="700" height="40" as="geometry" />
        </mxCell>

        <!-- VENDORS Table -->
        <mxCell id="vendors" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DBEAFE;strokeColor=#2272B4;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="vendors-title" value="vendors" style="text;html=1;strokeColor=none;fillColor=#2272B4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="40" y="100" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="vendors-fields" value="id (PK)&#xa;name&#xa;vat_pan&#xa;address&#xa;phone&#xa;comment" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="125" width="180" height="125" as="geometry" />
        </mxCell>

        <!-- ROLLS Table -->
        <mxCell id="rolls" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DBEAFE;strokeColor=#2272B4;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="rolls-title" value="rolls" style="text;html=1;strokeColor=none;fillColor=#2272B4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="280" y="100" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="rolls-fields" value="id (PK)&#xa;name&#xa;quantity&#xa;unit&#xa;color&#xa;vendor_id (FK)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="280" y="125" width="180" height="125" as="geometry" />
        </mxCell>

        <!-- Relationship: vendors -> rolls -->
        <mxCell id="rel-vendor-roll" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2272B4;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="vendors" target="rolls">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- BATCHES Table -->
        <mxCell id="batches" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DBEAFE;strokeColor=#2272B4;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="520" y="100" width="180" height="170" as="geometry" />
        </mxCell>
        <mxCell id="batches-title" value="batches" style="text;html=1;strokeColor=none;fillColor=#2272B4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="520" y="100" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="batches-fields" value="id (PK)&#xa;name&#xa;quantity&#xa;unit&#xa;color&#xa;roll_id (FK)&#xa;vendor_id (FK)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="520" y="125" width="180" height="145" as="geometry" />
        </mxCell>

        <!-- Relationship: rolls -> batches -->
        <mxCell id="rel-roll-batch" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#2272B4;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="rolls" target="batches">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SUB_BATCHES Table -->
        <mxCell id="subbatches" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#D1FAE5;strokeColor=#10B981;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="760" y="100" width="200" height="220" as="geometry" />
        </mxCell>
        <mxCell id="subbatches-title" value="sub_batches" style="text;html=1;strokeColor=none;fillColor=#10B981;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="760" y="100" width="200" height="25" as="geometry" />
        </mxCell>
        <mxCell id="subbatches-fields" value="id (PK)&#xa;name&#xa;batch_id (FK)&#xa;roll_id (FK)&#xa;estimated_pieces&#xa;expected_items&#xa;start_date&#xa;due_date&#xa;status&#xa;total_quantity&#xa;quantity_remaining" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="760" y="125" width="200" height="195" as="geometry" />
        </mxCell>

        <!-- Relationship: batches -> sub_batches -->
        <mxCell id="rel-batch-subbatch" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#10B981;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="batches" target="subbatches">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SIZE_DETAILS Table -->
        <mxCell id="sizedetails" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1020" y="100" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="sizedetails-title" value="size_details" style="text;html=1;strokeColor=none;fillColor=#666666;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1020" y="100" width="150" height="25" as="geometry" />
        </mxCell>
        <mxCell id="sizedetails-fields" value="id (PK)&#xa;sub_batch_id (FK)&#xa;size_category&#xa;quantity" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#333333;spacingLeft=8;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1020" y="125" width="150" height="75" as="geometry" />
        </mxCell>

        <!-- Relationship: sub_batches -> size_details -->
        <mxCell id="rel-sb-size" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;fontSize=9;" edge="1" parent="1" source="subbatches" target="sizedetails">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ATTACHMENTS Table -->
        <mxCell id="attachments" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1020" y="220" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="attachments-title" value="attachments" style="text;html=1;strokeColor=none;fillColor=#666666;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1020" y="220" width="150" height="25" as="geometry" />
        </mxCell>
        <mxCell id="attachments-fields" value="id (PK)&#xa;sub_batch_id (FK)&#xa;attachment_name&#xa;quantity" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#333333;spacingLeft=8;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1020" y="245" width="150" height="75" as="geometry" />
        </mxCell>

        <!-- Relationship: sub_batches -> attachments -->
        <mxCell id="rel-sb-attach" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;fontSize=9;" edge="1" parent="1" source="subbatches" target="attachments">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- DEPARTMENTS Table -->
        <mxCell id="departments" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FEF3C7;strokeColor=#F59E0B;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="350" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="departments-title" value="departments" style="text;html=1;strokeColor=none;fillColor=#F59E0B;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="40" y="350" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="departments-fields" value="id (PK)&#xa;name&#xa;description&#xa;supervisor_id (FK)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="375" width="180" height="95" as="geometry" />
        </mxCell>

        <!-- DEPARTMENT_SUB_BATCHES Table (Junction) -->
        <mxCell id="deptsubbatches" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FEE2E2;strokeColor=#EF4444;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="280" y="350" width="220" height="240" as="geometry" />
        </mxCell>
        <mxCell id="deptsubbatches-title" value="department_sub_batches&#xa;(JUNCTION TABLE)" style="text;html=1;strokeColor=none;fillColor=#EF4444;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="280" y="350" width="220" height="40" as="geometry" />
        </mxCell>
        <mxCell id="deptsubbatches-fields" value="id (PK)&#xa;sub_batch_id (FK)&#xa;department_id (FK)&#xa;quantity_received&#xa;quantity_remaining&#xa;status&#xa;remarks&#xa;alteration_source_id (FK)&#xa;rejection_source_id (FK)&#xa;created_at" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="280" y="390" width="220" height="200" as="geometry" />
        </mxCell>

        <!-- Relationship: departments -> dept_sub_batches -->
        <mxCell id="rel-dept-dsb" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#F59E0B;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="departments" target="deptsubbatches">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Relationship: sub_batches -> dept_sub_batches -->
        <mxCell id="rel-sb-dsb" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#10B981;strokeWidth=2;fontSize=10;fontStyle=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="subbatches" target="deptsubbatches">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="860" y="340" />
              <mxPoint x="390" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>

        <!-- WORKERS Table -->
        <mxCell id="workers" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FEF3C7;strokeColor=#F59E0B;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="180" height="160" as="geometry" />
        </mxCell>
        <mxCell id="workers-title" value="workers" style="text;html=1;strokeColor=none;fillColor=#F59E0B;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="workers-fields" value="id (PK)&#xa;name&#xa;pan&#xa;address&#xa;department_id (FK)&#xa;wage_type&#xa;wage_rate" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="545" width="180" height="135" as="geometry" />
        </mxCell>

        <!-- Relationship: departments -> workers -->
        <mxCell id="rel-dept-worker" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#F59E0B;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="departments" target="workers">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- WORKER_LOGS Table -->
        <mxCell id="workerlogs" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E0E7FF;strokeColor=#6366F1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="560" y="400" width="200" height="280" as="geometry" />
        </mxCell>
        <mxCell id="workerlogs-title" value="worker_logs" style="text;html=1;strokeColor=none;fillColor=#6366F1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="560" y="400" width="200" height="25" as="geometry" />
        </mxCell>
        <mxCell id="workerlogs-fields" value="id (PK)&#xa;worker_id (FK)&#xa;department_sub_batch_id (FK)&#xa;sub_batch_id (FK)&#xa;department_id (FK)&#xa;work_date&#xa;quantity_worked&#xa;unit_price&#xa;is_billable&#xa;activity_type&#xa;particulars&#xa;created_at" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="560" y="425" width="200" height="255" as="geometry" />
        </mxCell>

        <!-- Relationship: workers -> worker_logs -->
        <mxCell id="rel-worker-log" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#6366F1;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="workers" target="workerlogs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Relationship: dept_sub_batches -> worker_logs -->
        <mxCell id="rel-dsb-log" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#EF4444;strokeWidth=2;fontSize=10;fontStyle=1;" edge="1" parent="1" source="deptsubbatches" target="workerlogs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- SUPERVISORS Table -->
        <mxCell id="supervisors" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#D1FAE5;strokeColor=#10B981;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="40" y="720" width="180" height="130" as="geometry" />
        </mxCell>
        <mxCell id="supervisors-title" value="supervisors" style="text;html=1;strokeColor=none;fillColor=#10B981;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="40" y="720" width="180" height="25" as="geometry" />
        </mxCell>
        <mxCell id="supervisors-fields" value="id (PK)&#xa;name&#xa;email&#xa;password&#xa;department_id (FK)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#333333;spacingLeft=10;spacingTop=5;" vertex="1" parent="1">
          <mxGeometry x="40" y="745" width="180" height="105" as="geometry" />
        </mxCell>

        <!-- INVENTORY Section -->
        <mxCell id="inv-section" value="INVENTORY TABLES" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#8B5CF6;" vertex="1" parent="1">
          <mxGeometry x="820" y="370" width="200" height="25" as="geometry" />
        </mxCell>

        <!-- INVENTORY_CATEGORIES -->
        <mxCell id="invcategories" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#EDE9FE;strokeColor=#8B5CF6;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="820" y="400" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="invcategories-title" value="inventory_categories" style="text;html=1;strokeColor=none;fillColor=#8B5CF6;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="820" y="400" width="150" height="25" as="geometry" />
        </mxCell>
        <mxCell id="invcategories-fields" value="id (PK)&#xa;name" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#333333;spacingLeft=8;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="820" y="425" width="150" height="55" as="geometry" />
        </mxCell>

        <!-- INVENTORY_ITEMS -->
        <mxCell id="invitems" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#EDE9FE;strokeColor=#8B5CF6;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1000" y="400" width="170" height="180" as="geometry" />
        </mxCell>
        <mxCell id="invitems-title" value="inventory_items" style="text;html=1;strokeColor=none;fillColor=#8B5CF6;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1000" y="400" width="170" height="25" as="geometry" />
        </mxCell>
        <mxCell id="invitems-fields" value="id (PK)&#xa;name&#xa;unit&#xa;quantity&#xa;min_quantity&#xa;category_id (FK)&#xa;vendor&#xa;phone&#xa;remarks" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#333333;spacingLeft=8;spacingTop=3;" vertex="1" parent="1">
          <mxGeometry x="1000" y="425" width="170" height="155" as="geometry" />
        </mxCell>

        <!-- Relationship: inv_categories -> inv_items -->
        <mxCell id="rel-cat-item" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#8B5CF6;strokeWidth=2;fontSize=9;" edge="1" parent="1" source="invcategories" target="invitems">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- INVENTORY_ADDITIONS -->
        <mxCell id="invadditions" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1200" y="400" width="140" height="110" as="geometry" />
        </mxCell>
        <mxCell id="invadditions-title" value="inventory_additions" style="text;html=1;strokeColor=none;fillColor=#666666;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1200" y="400" width="140" height="25" as="geometry" />
        </mxCell>
        <mxCell id="invadditions-fields" value="id (PK)&#xa;inventory_id (FK)&#xa;quantity&#xa;date, price, remarks" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#333333;spacingLeft=6;spacingTop=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="425" width="140" height="85" as="geometry" />
        </mxCell>

        <!-- INVENTORY_SUBTRACTIONS -->
        <mxCell id="invsubtractions" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1200" y="530" width="140" height="110" as="geometry" />
        </mxCell>
        <mxCell id="invsubtractions-title" value="inventory_subtractions" style="text;html=1;strokeColor=none;fillColor=#666666;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1200" y="530" width="140" height="25" as="geometry" />
        </mxCell>
        <mxCell id="invsubtractions-fields" value="id (PK)&#xa;inventory_id (FK)&#xa;quantity&#xa;reason, date, remarks" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#333333;spacingLeft=6;spacingTop=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="555" width="140" height="85" as="geometry" />
        </mxCell>

        <!-- Relationship: inv_items -> additions/subtractions -->
        <mxCell id="rel-item-add" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;fontSize=9;" edge="1" parent="1" source="invitems" target="invadditions">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-item-sub" value="1:N" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;strokeWidth=1;fontSize=9;" edge="1" parent="1" source="invitems" target="invsubtractions">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f9fafb;strokeColor=#e5e7eb;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="700" width="530" height="100" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="835" y="710" width="80" height="20" as="geometry" />
        </mxCell>

        <mxCell id="legend-admin" value="Admin Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#DBEAFE;strokeColor=#2272B4;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="835" y="740" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-prod" value="Production" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#D1FAE5;strokeColor=#10B981;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="925" y="740" width="70" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-dept" value="Departments" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FEF3C7;strokeColor=#F59E0B;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1005" y="740" width="75" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-junction" value="Junction" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FEE2E2;strokeColor=#EF4444;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1090" y="740" width="60" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-logs" value="Logs" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E0E7FF;strokeColor=#6366F1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1160" y="740" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-inv" value="Inventory" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#EDE9FE;strokeColor=#8B5CF6;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1220" y="740" width="65" height="25" as="geometry" />
        </mxCell>
        <mxCell id="legend-child" value="Child Tables" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1295" y="740" width="70" height="25" as="geometry" />
        </mxCell>

        <mxCell id="legend-pk" value="PK = Primary Key | FK = Foreign Key | 1:N = One-to-Many" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="835" y="775" width="350" height="15" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
